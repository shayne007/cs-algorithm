

数组：为什么很多编程语言中数组都从0开始编号？

数组是最基本的数据类型，我们要透过现象看本质，这4个方面会帮你理解它的精髓。

1.数组如何实现随机访问

``` java
a[i]_address = base_address + i * data_type_size
```

2.低效的“插入”和“删除”

场景1：数据搬移（保证有序），O(n)

场景2：数据置换（不保证内存连续性）,O(1)

删除：先标记，后集中删除（数组空间不够时搬移），JVM 标记清除垃圾回收算法的核心思想

3.数组的访问越界问题

访问数组的本质就是访问一段连续内存，只要数组通过偏移计算得到的内存地址是可用的，那么程序就可能不会报任何错误(C语言)

4.容器能否完全替代数组

事先指定ArrayList数据大小可以省掉很多次内存申请和数据搬移操作。

做一些非常底层的开发，比如开发网络框架，性能的优化需要做到极致，这个时候数组就会优于容器，成为首选。



思考题：

1.前面我基于数组的原理引出 JVM 的标记清除垃圾回收算法的核心理念。我不知道你是否使用 Java 语言，理解 JVM，如果你熟悉，可以在评论区回顾下你理解的标记清除垃圾回收算法。



2.前面我们讲到一维数组的内存寻址公式，那你可以思考一下，类比一下，二维数组的内存寻址公式是怎样的呢？

``` java
a[i][j]_address = base_address + (i*m+j) * data_type_size
```